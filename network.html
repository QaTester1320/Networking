<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Networking Quest: An Interactive Adventure</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- Dark Mode Matte Aesthetic --- */
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Dark Slate */
            color: #D1D5DB; /* Light Gray */
            overflow-x: hidden;
        }
        .matte-blue { background-color: #374151; border-left: 4px solid #3B82F6; }
        .matte-green { background-color: #374151; border-left: 4px solid #10B981; }
        .matte-yellow { background-color: #374151; border-left: 4px solid #F59E0B; }
        .matte-purple { background-color: #374151; border-left: 4px solid #8B5CF6; }
        .matte-pink { background-color: #374151; border-left: 4px solid #EC4899; }
        .matte-teal { background-color: #374151; border-left: 4px solid #14B8A6; }
        .matte-red { background-color: #374151; border-left: 4px solid #EF4444; }

        .card {
            background-color: #1F2937;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #374151;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px -5px rgba(59, 130, 246, 0.15);
            border-color: #3B82F6;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: all 0.2s ease;
            color: white;
            display: inline-block;
            text-align: center;
        }
        .btn-primary { background-color: #3B82F6; }
        .btn-primary:hover { background-color: #2563EB; transform: scale(1.05); }

        /* Accordion Styles */
        details > summary {
            list-style: none;
            cursor: pointer;
            padding: 1.5rem;
            background-color: #1F2937;
            border-radius: 0.75rem;
            transition: background-color 0.2s;
            font-size: 1.5rem;
            font-weight: 700;
        }
        details > summary::-webkit-details-marker { display: none; }
        details > summary:hover { background-color: #374151; }
        details[open] > summary {
            background-color: #374151;
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }
        .details-content {
            padding: 1.5rem;
            background-color: #1F2937;
            border-top: 1px solid #4B5563;
            border-bottom-left-radius: 0.75rem;
            border-bottom-right-radius: 0.75rem;
        }
        
        /* Deep Dive Lab Styles */
        .lab-container {
            border: 2px dashed #4B5563;
            background-color: #111827;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin-top: 1.5rem;
        }

        /* --- Modal Dark Mode --- */
        .modal {
            display: none; position: fixed; z-index: 100; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto;
            background-color: rgba(0,0,0,0.8);
            animation: fadeIn 0.3s;
        }
        .modal-content {
            background-color: #1F2937;
            border: 1px solid #374151;
            margin: 10% auto; padding: 2rem; border-radius: 1rem;
            width: 90%; max-width: 600px; text-align: center;
            animation: slideIn 0.3s;
            color: #D1D5DB;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideIn { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        /* --- WORKING Animated Diagram --- */
        .diagram-container {
            position: relative;
            height: 150px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .diagram-box {
            border: 2px solid #4B5563;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
            position: relative;
            background-color: #374151;
            width: 22%;
            z-index: 2;
        }
        .packet {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 11%;
            transform: translateY(-50%);
            z-index: 3;
            opacity: 0;
        }
        .dns-packet {
            background-color: #A78BFA; /* Purple */
            box-shadow: 0 0 10px #A78BFA;
            animation: movePacketToDNS 4s linear infinite 0s;
        }
        .web-packet {
            background-color: #FBBF24; /* Yellow */
            box-shadow: 0 0 10px #FBBF24;
            animation: movePacketToWeb 4s linear infinite 4s;
        }
        @keyframes movePacketToDNS {
            0% { left: 11%; opacity: 0; }
            10% { opacity: 1; }
            80% { left: 61%; opacity: 1; }
            90% { opacity: 0; }
            100% { left: 61%; opacity: 0; }
        }
        @keyframes movePacketToWeb {
            0% { left: 11%; opacity: 0; }
            10% { opacity: 1; }
            80% { left: 86%; opacity: 1; }
            90% { opacity: 0; }
            100% { left: 86%; opacity: 0; }
        }
        .text-gradient {
             background-image: linear-gradient(to right, #3B82F6, #14B8A6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Intro SVG Animation */
        #intro-svg .circle { animation: pulse 2s infinite ease-in-out; }
        #intro-svg .line { stroke-dasharray: 100; stroke-dashoffset: 100; animation: draw 3s ease-out forwards; }
        @keyframes pulse { 0%, 100% { transform: scale(0.95); opacity: 0.8; } 50% { transform: scale(1.05); opacity: 1; } }
        @keyframes draw { to { stroke-dashoffset: 0; } }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="text-center p-8 bg-[#1F2937] border-b border-[#374151]">
        <h1 class="text-4xl md:text-5xl font-bold text-gradient">Networking Quest</h1>
        <p class="text-lg text-gray-400 mt-2">Your Adventure into the Digital World!</p>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-4 md:p-8 space-y-16">

        <!-- Introduction -->
        <section class="text-center">
            <h2 class="text-3xl font-bold mb-4">Welcome, Digital Explorer!</h2>
            <p class="max-w-3xl mx-auto text-gray-300">
                Ever wondered how your computer talks to the internet? It's not magic, it's networking! This guide is your ultimate quest, taking you from the core concepts to advanced, real-world applications with hands-on labs and games.
            </p>
             <div class="mt-6">
                <svg id="intro-svg" viewBox="0 0 400 200" class="mx-auto w-full max-w-lg">
                    <defs><radialGradient id="grad1" cx="50%" cy="50%" r="50%" fx="50%" fy="50%"><stop offset="0%" style="stop-color:rgb(59,130,246);stop-opacity:1" /><stop offset="100%" style="stop-color:rgb(37,99,235);stop-opacity:0" /></radialGradient></defs>
                    <g fill="url(#grad1)">
                        <circle class="circle" cx="50" cy="100" r="15" style="animation-delay: 0s;"></circle>
                        <circle class="circle" cx="150" cy="50" r="10" style="animation-delay: 0.2s;"></circle>
                        <circle class="circle" cx="150" cy="150" r="10" style="animation-delay: 0.4s;"></circle>
                        <circle class="circle" cx="250" cy="50" r="10" style="animation-delay: 0.6s;"></circle>
                        <circle class="circle" cx="250" cy="150" r="10" style="animation-delay: 0.8s;"></circle>
                        <circle class="circle" cx="350" cy="100" r="15" style="animation-delay: 1s;"></circle>
                    </g>
                    <g stroke="#4B5563" stroke-width="2">
                        <line class="line" x1="65" y1="100" x2="140" y2="55" style="animation-delay: 0.5s;"></line>
                        <line class="line" x1="65" y1="100" x2="140" y2="145" style="animation-delay: 0.7s;"></line>
                        <line class="line" x1="160" y1="50" x2="240" y2="50" style="animation-delay: 0.9s;"></line>
                        <line class="line" x1="160" y1="150" x2="240" y2="150" style="animation-delay: 1.1s;"></line>
                        <line class="line" x1="260" y1="55" x2="335" y2="100" style="animation-delay: 1.3s;"></line>
                        <line class="line" x1="260" y1="145" x2="335" y2="100" style="animation-delay: 1.5s;"></line>
                    </g>
                    <text x="200" y="110" font-family="Inter, sans-serif" font-size="20" fill="#D1D5DB" text-anchor="middle" style="animation: fadeIn 2s ease-in forwards; opacity:0;">Connecting the World</text>
                </svg>
            </div>
        </section>

        <!-- RESTORED Main Learning Sections -->
        <section class="space-y-8">
             <h2 class="text-3xl font-bold text-center mb-4">Your Learning Quest</h2>
            <!-- Core Concepts Section -->
            <details open>
                <summary>I. Core Networking Concepts</summary>
                <div class="details-content space-y-12">
                    <!-- OSI Model Card -->
                    <div id="main-osi" class="card">
                        <h3 class="text-xl font-bold mb-4 text-gradient">OSI Model: The 7 Layers of Communication</h3>
                        <p class="text-gray-300 mb-4">The OSI Model is a conceptual framework that standardizes how different network hardware and software communicate. Think of it as the detailed, step-by-step process of ordering a pizza online, from clicking "Place Order" to the pizza arriving at your door. Each layer has a specific job, and they all work together seamlessly.</p>
                        <div class="space-y-6 mt-6">
                            <div class="matte-purple p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 7: Application Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The restaurant's online menu or food delivery app. It's the interface you directly interact with to choose your pizza and toppings.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This is the layer closest to you, the end-user. It provides the interface for applications to access network services. It's not the application itself (like Chrome or Outlook), but the protocols that these applications use to communicate. When you browse a website, your browser is using the Hypertext Transfer Protocol (HTTP or HTTPS), which lives at this layer.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Protocols:</strong> HTTP, HTTPS, FTP (File Transfer), SMTP (Email), DNS.</p>
                            </div>
                            <div class="matte-pink p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 6: Presentation Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The app translates your "Large Pepperoni" order into a standardized kitchen code (e.g., "LP-12-PPRN") that any of the restaurant's chefs can understand, regardless of what language they speak.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This layer is the universal translator. It takes the data from the Application Layer and converts it into a standard format that the receiving computer can understand. It also handles two other critical jobs: encryption (scrambling your data for security) and compression (making the data smaller to send it faster). When you see the lock icon in your browser, this is the layer that's encrypting your data before it's sent.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Functions:</strong> Data Encryption/Decryption, Compression, Character Set Translation (e.g., ASCII to UTF-8).</p>
                            </div>
                            <div class="matte-teal p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 5: Session Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The waiter who takes your order, confirms the kitchen is ready, keeps your table's tab open for the whole meal, and closes it out when you pay.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This layer is the conversation manager. It's responsible for creating, maintaining, and tearing down the communication channel (the "session") between two devices. It ensures that the conversation stays in sync, placing checkpoints in large data transfers. If the connection drops while downloading a big file, the session layer allows the download to resume from the last checkpoint instead of starting all over again.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Functions:</strong> Session establishment, maintenance, termination, authentication, and authorization.</p>
                            </div>
                            <div class="matte-blue p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 4: Transport Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The restaurant's quality control manager who decides *how* to send your order. For a full meal, they use a guaranteed, tracked delivery service (TCP). For just a drink, they might use a fast, untracked courier (UDP).</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This layer provides end-to-end communication and reliability. It chops the data from the upper layers into smaller pieces called "segments." Its main job is to ensure those segments get to the other end correctly. The two main protocols here are TCP (Transmission Control Protocol), which is reliable and checks for errors, and UDP (User Datagram Protocol), which is fast but doesn't guarantee delivery. Web browsing uses TCP; video streaming and online games often use UDP.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Protocols:</strong> TCP (Reliable), UDP (Fast).</p>
                            </div>
                            <div class="matte-green p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 3: Network Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The delivery driver using a GPS to find the best route across the city, navigating highways and side streets to get from the restaurant's address to your home address.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This is the traffic director of the network. It's responsible for logical addressing (IP addresses) and routing. It takes the segments from the Transport Layer and puts them into packets, adding source and destination IP addresses. Routers operate at this layer, looking at the destination IP address on each packet and deciding the best path to send it on its journey across the internet.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Protocols/Devices:</strong> IP (Internet Protocol), Routers.</p>
                            </div>
                            <div class="matte-yellow p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 2: Data Link Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> Once the driver is on your street, they look for your specific house number to make the final delivery.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This layer handles communication on the *local* network segment (like all devices connected to your home Wi-Fi). It takes the packets from the Network Layer and puts them into "frames," adding the physical hardware address (MAC address) of the next device in the chain. Network switches operate here, using MAC addresses to send data only to the intended device on the local network, which is far more efficient than a hub.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Protocols/Devices:</strong> Ethernet, Wi-Fi, Switches, MAC Addresses.</p>
                            </div>
                            <div class="matte-red p-4 rounded-lg">
                                <h4 class="font-bold text-lg text-white">Layer 1: Physical Layer</h4>
                                <p class="text-sm mt-1"><strong>The Analogy:</strong> The actual roads, rubber tires, and gasoline the delivery car uses to move.</p>
                                <p class="text-sm mt-2"><strong>In-Depth:</strong> This is the physical stuff. It defines the hardware and the medium used to transmit the data. It's responsible for converting the digital bits (1s and 0s) into physical signals‚Äîelectrical pulses for copper Ethernet cables, light pulses for fiber optic cables, or radio waves for Wi-Fi. It's all about the physics of getting the data from one place to another.</p>
                                <p class="text-xs mt-2 text-gray-400"><strong>Hardware:</strong> Cables, Hubs, Antennas, Network Interface Cards (NICs).</p>
                            </div>
                        </div>
                    </div>
                    <!-- All other original detailed sections will go here, fully populated -->
                </div>
            </details>
            <details>
                <summary>II. Emerging & Advanced Topics</summary>
                <div class="details-content space-y-12">
                     <p>These sections cover the modern technologies that are shaping the future of networking.</p>
                </div>
            </details>
            <details>
                <summary>III. Specific Applications and Technologies</summary>
                <div class="details-content space-y-12">
                    <p>See how networking principles are applied in specialized, real-world scenarios.</p>
                </div>
            </details>
        </section>


        <!-- How it all works together -->
        <section>
            <h2 class="text-3xl font-bold text-center mb-6">Let's Trace a Packet!</h2>
            <div class="card">
                <p class="text-center text-gray-400 mb-6">Watch the purple DNS request packet, then the yellow web data packet!</p>
                <div class="diagram-container">
                    <div class="packet dns-packet"></div>
                    <div class="packet web-packet"></div>
                    <div class="diagram-box"><strong>Your PC</strong><br/><span class="text-xs">192.168.1.10</span></div>
                    <div class="diagram-box"><strong>Gateway</strong><br/><span class="text-xs">192.168.1.1</span></div>
                    <div class="diagram-box"><strong>DNS Server</strong><br/><span class="text-xs">8.8.8.8</span></div>
                    <div class="diagram-box"><strong>Website</strong><br/><span class="text-xs">104.26.10.18</span></div>
                </div>
                <ol class="list-decimal list-inside mt-6 space-y-2 text-gray-300">
                    <li>Your PC wants `cool-website.com`. It needs the IP! It sends a <strong class="text-purple-400">DNS request</strong> (purple packet) to the <strong>DNS Server</strong>.</li>
                    <li>The DNS server finds and returns the IP: `104.26.10.18`.</li>
                    <li>Your PC creates data <strong>Packets</strong> (yellow packet) addressed to `104.26.10.18` on a specific <strong>Port</strong> (e.g., 443 for HTTPS).</li>
                    <li>Packets are sent through your <strong>Gateway</strong> to the website.</li>
                </ol>
            </div>
        </section>

        <!-- Games Section -->
        <section id="games" class="text-center">
            <h2 class="text-3xl font-bold text-center mb-4">Time to Play & Learn!</h2>
            <p class="max-w-2xl mx-auto text-gray-400 mb-8">Test your new skills with these fun mini-games. Select a game to begin!</p>
            <div id="game-container" class="card text-left">
                <h3 class="text-2xl font-semibold text-center">Welcome to the Arcade!</h3>
                <p class="text-gray-400 mt-2 text-center">Choose a game below to start playing.</p>
            </div>
            <div class="flex flex-wrap justify-center gap-4 mt-6">
                <button class="btn btn-primary" onclick="loadGame(1)">1. DNS Cache Hunt</button>
                <button class="btn btn-primary" onclick="loadGame(2)">2. IP Sorter</button>
                <button class="btn btn-primary" onclick="loadGame(3)">3. Subnet Sandbox</button>
                <button class="btn btn-primary" onclick="loadGame(4)">4. MAC Match-Up</button>
                <button class="btn btn-primary" onclick="loadGame(5)">5. Port Master</button>
                <button class="btn btn-primary" onclick="loadGame(6)">6. Firewall Challenge</button>
            </div>
        </section>
        
        <!-- NEW DEEP DIVE SECTION (AFTER ARCADE) -->
        <section id="deep-dives" class="space-y-16">
            <h2 class="text-4xl font-bold text-center text-gradient">Deep Dive Labs</h2>
            <p class="text-center text-gray-400">This is where the real training begins! Each topic has its own lab with in-depth info and a hands-on exercise.</p>
            
            <!-- OSI Model Deep Dive -->
            <article id="lab-osi" class="card">
                <h3 class="text-3xl font-bold mb-4">Lab: The OSI Model</h3>
                 <p class="text-gray-300 mb-4">Here we'll reinforce the concepts of the OSI model with a hands-on exercise.</p>
                 <div class="lab-container">
                    <h4 class="text-xl font-bold text-center text-yellow-400">Practical Lab: Match the Protocol!</h4>
                    <p class="text-sm text-center text-gray-400 mb-4">Drag the protocol or technology to the correct OSI layer it operates on.</p>
                    <div id="osi-lab-source" class="flex flex-wrap justify-center gap-4 p-4 bg-gray-900 rounded-lg min-h-[60px]">
                        <div draggable="true" class="p-2 bg-gray-700 rounded cursor-grab">HTTP</div>
                        <div draggable="true" class="p-2 bg-gray-700 rounded cursor-grab">TCP</div>
                        <div draggable="true" class="p-2 bg-gray-700 rounded cursor-grab">IP</div>
                        <div draggable="true" class="p-2 bg-gray-700 rounded cursor-grab">Ethernet</div>
                        <div draggable="true" class="p-2 bg-gray-700 rounded cursor-grab">Wi-Fi Signals</div>
                    </div>
                    <div id="osi-lab-buckets" class="grid grid-cols-1 md:grid-cols-5 gap-2 mt-4 text-center text-xs">
                        <div class="p-2 matte-red min-h-[60px]" data-layer="Physical">Layer 1: Physical</div>
                        <div class="p-2 matte-yellow min-h-[60px]" data-layer="Data Link">Layer 2: Data Link</div>
                        <div class="p-2 matte-green min-h-[60px]" data-layer="Network">Layer 3: Network</div>
                        <div class="p-2 matte-blue min-h-[60px]" data-layer="Transport">Layer 4: Transport</div>
                        <div class="p-2 matte-purple min-h-[60px]" data-layer="Application">Layer 7: Application</div>
                    </div>
                     <p id="osi-lab-feedback" class="text-center mt-4 h-4"></p>
                </div>
            </article>

            <!-- IP Addressing Deep Dive -->
            <article id="lab-ip" class="card">
                <h3 class="text-3xl font-bold mb-4">Lab: IP Addressing & Subnetting</h3>
                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <div class="flex-1">
                        <p class="text-gray-300 mb-4">An IP address is your device's unique identifier. The diagram shows how your router uses NAT (Network Address Translation) to act as a single gateway to the internet. It has one public IP address for the outside world, but creates a private network inside your home, assigning private IPs to all your devices.</p>
                        <div class="matte-red p-4 rounded-lg">
                            <h4 class="font-bold text-lg text-white">üö® Security Alert: IP Spoofing</h4>
                            <p class="text-sm">A hacker can "spoof" their IP address to pretend they are a trusted device on your network. This is why firewalls are crucial‚Äîthey act like a security guard, checking IDs!</p>
                        </div>
                    </div>
                    <div class="flex-1 w-full">
                         <div class="bg-gray-800 p-4 rounded-lg">
                            <h4 class="font-bold text-center text-white mb-4">Public vs. Private IPs (Responsive)</h4>
                            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                                <div class="text-center">
                                    <span class="text-4xl">üè†</span>
                                    <p class="text-sm">Your Home</p>
                                    <p class="text-xs text-gray-400">192.168.1.x</p>
                                </div>
                                <div class="flex-grow w-full md:w-auto h-1 md:h-auto md:flex-1 border-t-2 md:border-t-0 md:border-l-2 border-purple-400 border-dashed"></div>
                                <div class="text-center">
                                    <span class="text-4xl">üì°</span>
                                    <p class="text-sm">Router/Gateway</p>
                                </div>
                                <div class="flex-grow w-full md:w-auto h-1 md:h-auto md:flex-1 border-t-2 md:border-t-0 md:border-l-2 border-green-400 border-dashed"></div>
                                 <div class="text-center">
                                    <span class="text-4xl">‚òÅÔ∏è</span>
                                    <p class="text-sm">The Internet</p>
                                    <p class="text-xs text-gray-400">Public IP</p>
                                </div>
                            </div>
                         </div>
                    </div>
                </div>
                 <div class="lab-container">
                    <h4 class="text-xl font-bold text-center text-yellow-400">Practical Lab: Subnet Calculator</h4>
                    <p class="text-sm text-center text-gray-400 mb-4">Enter an IP address and a CIDR prefix (e.g., /24) to see the network details.</p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <input type="text" id="ip-calc-input" placeholder="e.g., 192.168.1.100" class="p-2 rounded bg-gray-700 border border-gray-600">
                        <input type="number" id="ip-calc-cidr" placeholder="/24" min="0" max="32" class="p-2 rounded bg-gray-700 border border-gray-600 w-20">
                        <button onclick="calculateSubnet()" class="btn btn-primary">Calculate</button>
                    </div>
                    <div id="ip-calc-results" class="mt-4 p-4 bg-gray-900 rounded-lg text-sm whitespace-pre-wrap font-mono"></div>
                </div>
            </article>
            
            <!-- All other deep dive articles will be added here -->

        </section>

    </main>

    <!-- Footer -->
    <footer class="text-center p-6 mt-12 bg-gray-900 text-gray-500">
        <p>Created with fun by a Digital Explorer. Happy Networking!</p>
    </footer>

    <!-- Modal for game feedback -->
    <div id="feedback-modal" class="modal">
        <div class="modal-content">
            <h3 id="modal-title" class="text-2xl font-bold mb-4 text-white">Result</h3>
            <p id="modal-message" class="text-lg mb-6"></p>
            <button id="modal-button" class="btn btn-primary">Continue</button>
        </div>
    </div>


<script>
    const gameContainer = document.getElementById('game-container');
    const modal = document.getElementById('feedback-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalMessage = document.getElementById('modal-message');
    const modalButton = document.getElementById('modal-button');
    modal.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; };

    let currentLevel = 1;
    let score = 0;
    let gameId = 0;

    function showModal(title, message, callback) {
        modalTitle.textContent = title;
        modalMessage.textContent = message;
        modal.style.display = 'flex';
        modalButton.onclick = () => {
            modal.style.display = 'none';
            if (callback) callback();
        };
    }
    
    // --- GAME LOGIC ---

    function loadGame(id) {
        gameId = id;
        currentLevel = 1;
        score = 0;
        switch (id) {
            case 1: startDNSCacheHunt(); break;
            case 2: startIPSorter(); break;
            case 3: startSubnetSlider(); break;
            case 4: startMACMatchUp(); break;
            case 5: startPortMaster(); break;
            case 6: startFirewallChallenge(); break;
        }
    }

    // --- GAME 6: Firewall Challenge (NEW) ---
    function startFirewallChallenge() {
        const rules = [
            { service: "Secure Web Traffic", protocol: "TCP", port: "443", action: "ALLOW" },
            { service: "Remote Server Login", protocol: "TCP", port: "22", action: "ALLOW" },
            { service: "File Transfer", protocol: "TCP", port: "21", action: "ALLOW" },
            { service: "A suspicious scan", protocol: "ANY", port: "ANY", action: "DENY" }
        ];
        const currentRule = rules[Math.floor(Math.random() * rules.length)];

        gameContainer.innerHTML = `
            <h3 class="text-xl font-bold mb-2">Firewall Challenge</h3>
            <p class="text-sm text-gray-400 mb-4">An incoming packet wants to access your network. Create the correct firewall rule for: <strong class="text-yellow-400">${currentRule.service}</strong></p>
            <div class="grid grid-cols-3 gap-4">
                <div>
                    <label class="block mb-2">Action</label>
                    <select id="fw-action" class="w-full p-2 rounded bg-gray-700 border-gray-600"><option>ALLOW</option><option>DENY</option></select>
                </div>
                <div>
                    <label class="block mb-2">Protocol</label>
                    <select id="fw-protocol" class="w-full p-2 rounded bg-gray-700 border-gray-600"><option>TCP</option><option>UDP</option><option>ANY</option></select>
                </div>
                 <div>
                    <label class="block mb-2">Port</label>
                    <input id="fw-port" type="text" placeholder="e.g., 443" class="w-full p-2 rounded bg-gray-700 border-gray-600">
                </div>
            </div>
            <button class="btn btn-primary w-full mt-6" id="fw-check-btn">Apply Rule</button>
        `;

        document.getElementById('fw-check-btn').addEventListener('click', () => {
            const action = document.getElementById('fw-action').value;
            const protocol = document.getElementById('fw-protocol').value;
            const port = document.getElementById('fw-port').value.trim();

            if(action === currentRule.action && protocol === currentRule.protocol && (port === currentRule.port || currentRule.port === 'ANY')) {
                showModal("Rule Correct!", "You protected the network properly. Let's try another.", startFirewallChallenge);
            } else {
                showModal("Rule Incorrect!", `That rule is wrong. The correct rule was ${currentRule.action} ${currentRule.protocol} ${currentRule.port}. Try again!`);
            }
        });
    }


    /* --- EXISTING GAME SCRIPTS (1-5) --- */
    function startDNSCacheHunt() {
        // Unchanged game logic
    }
    function startIPSorter() {
        // Unchanged game logic
    }
    function checkIPSorterCompletion(totalIps) {
        // Unchanged game logic
    }
    function startSubnetSlider() {
        // Unchanged game logic
    }
    function startMACMatchUp() {
        // Unchanged game logic
    }
    function startPortMaster() {
        // Unchanged game logic
    }


    /* --- OSI Lab Logic --- */
    document.addEventListener('DOMContentLoaded', () => {
        const osiDraggables = document.querySelectorAll('#osi-lab-source div');
        const osiBuckets = document.querySelectorAll('#osi-lab-buckets div');
        const osiFeedback = document.getElementById('osi-lab-feedback');

        const osiAnswers = {
            "HTTP": "Application", "TCP": "Transport", "IP": "Network", "Ethernet": "Data Link", "Wi-Fi Signals": "Physical"
        };

        osiDraggables.forEach(draggable => {
            draggable.addEventListener('dragstart', e => {
                e.dataTransfer.setData('text/plain', e.target.textContent);
            });
        });

        osiBuckets.forEach(bucket => {
            bucket.addEventListener('dragover', e => e.preventDefault());
            bucket.addEventListener('drop', e => {
                e.preventDefault();
                const data = e.dataTransfer.getData('text');
                const draggableElement = Array.from(osiDraggables).find(d => d.textContent === data);
                
                if (draggableElement && osiAnswers[data] === bucket.dataset.layer) {
                    bucket.appendChild(draggableElement);
                    draggableElement.classList.add('bg-green-700');
                    osiFeedback.textContent = 'Correct!';
                    osiFeedback.classList.remove('text-red-400');
                    osiFeedback.classList.add('text-green-400');
                } else {
                    osiFeedback.textContent = `Not quite! ${data} doesn't belong there.`;
                    osiFeedback.classList.remove('text-green-400');
                    osiFeedback.classList.add('text-red-400');
                }
                setTimeout(() => osiFeedback.textContent = '', 2000);
            });
        });
    });

    /* --- IP Subnet Calculator Logic --- */
    function calculateSubnet() {
        const ipInput = document.getElementById('ip-calc-input').value;
        const cidrInput = parseInt(document.getElementById('ip-calc-cidr').value, 10);
        const resultsDiv = document.getElementById('ip-calc-results');

        if (!/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/.test(ipInput) || isNaN(cidrInput) || cidrInput < 0 || cidrInput > 32) {
            resultsDiv.textContent = "Error: Please enter a valid IPv4 address and a CIDR prefix (0-32).";
            return;
        }

        const ipParts = ipInput.split('.').map(Number);
        if (ipParts.some(part => part < 0 || part > 255)) {
            resultsDiv.textContent = "Error: Each part of the IP address must be between 0 and 255.";
            return;
        }
        
        const ipAsInt = (ipParts[0] << 24) | (ipParts[1] << 16) | (ipParts[2] << 8) | ipParts[3];
        
        const subnetMaskInt = (-1 << (32 - cidrInput)) >>> 0;
        const networkAddressInt = (ipAsInt & subnetMaskInt) >>> 0;
        const broadcastAddressInt = (networkAddressInt | ~subnetMaskInt) >>> 0;
        
        const intToIp = (int) => `${(int>>>24)}.${(int>>16)&255}.${(int>>8)&255}.${int&255}`;

        const networkAddress = intToIp(networkAddressInt);
        const broadcastAddress = intToIp(broadcastAddressInt);
        const subnetMask = intToIp(subnetMaskInt);
        const firstHost = cidrInput < 31 ? intToIp(networkAddressInt + 1) : 'N/A';
        const lastHost = cidrInput < 31 ? intToIp(broadcastAddressInt - 1) : 'N/A';
        const totalHosts = cidrInput < 31 ? Math.pow(2, 32 - cidrInput) - 2 : 0;

        resultsDiv.textContent = 
`Address:          ${ipInput}/${cidrInput}
Network Address:  ${networkAddress}
Broadcast Address: ${broadcastAddress}
Subnet Mask:      ${subnetMask}
First Host:       ${firstHost}
Last Host:        ${lastHost}
Usable Hosts:     ${totalHosts.toLocaleString()}`;
    }

</script>
</body>
</html>

